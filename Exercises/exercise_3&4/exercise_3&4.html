<!DOCTYPE HTML>
<html>
<head>
  <title> Exercise for Week 5+6 - Alessia Signorino</title>
  <link href="css/style.css" rel="stylesheet" type="text/css">
  <script>

  $(document).ready(function() {

    // let section3 = $('#s3');
    let loaded=false;

    //assign call back to click event
    $("#searchButton").click(getWaterData);

    //callback function for click
    function getWaterData() {
      $("#s3").empty();
      if(loaded ===false){
        // success, get json data, searchItem as a filter (tagmode), callback displayResults
        let searchItem = $("#searchText").val();
        $.getJSON('result.json',{tags:searchItem, tagmode:"any", format:"json"}, displayResults {
          console.log(searchItem);
          // displayResults(data);
          loaded=true;
        })
        //fail
        .fail(function() {
          console.log( "error" );
        });

      } else {
        console.log("data was loaded");
      } // if loaded
    } //getWaterData

      //call bac function display results
      function displayResults(result){

        console.log(result);
        let days = results['Days']; // days assigned to day index in json array

        for(var i=0; i<result.length; i++) {

          let line1 = result[i].Times;
          let line2 = result[i].ContainerQty;
          let line3 = result[i].Container;
          let line4 = result[i].Location;

          $('<section>').attr("id","container"+i).appendTo("#s3");
          $("#container"+i).addClass("aCell");
          $("<section>").html(item.title+item.description).addClass("itemClass").appendTo("#container"+i);

          // let s3 = $('<#s3>');
          // let line1 = $("<p>");
          // let line2 = $("<p>");
          // let line3 = $("<p>");
          // let line4 = $("<p>");

          // $(line1).text(result[i].Times);
          // $(line2).text(result[i].ContainerQty);
          // $(line3).text(result[i].Container);
          // $(line4).text(result[i].Location);

          // $(line1).appendTo("#s3");
          // $(line2).appendTo("#s3");
          // $(line3).appendTo("#s3");
          // $(line4).appendTo("#s3");

        } //for
      } //displayResults

  }); //document.ready

  </script>
</head>

<body>
  <!--Header with search prompt-->
  <section id="s1">
    <hgroup>
      <h2>Keeping track of hydration with</h2>
      <h1>Water Tracker</h1>
    </hgroup>
  </section>

  <section id="s2">
    <article>
      <h1>Enter a day number (1-4) to track your water intake</h2>
      <p>Type in a search keyword:</p>
      <input type="text" id="searchText" value="search Item" />
      <input type="button" value="Search!" id="searchButton" />
      </p>
    </article>
  </section>

  <section id="s3"><!--results--></section>

</body>
</html>
